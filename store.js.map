{"version":3,"sources":["webpack://joy-ui/webpack/bootstrap","webpack://joy-ui/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://joy-ui/(webpack)/buildin/harmony-module.js","webpack://joy-ui/external {\"root\":\"Immutable\",\"commonjs\":\"immutable\",\"commonjs2\":\"immutable\",\"amd\":\"immutable\",\"umd\":\"immutable\"}","webpack://joy-ui/./node_modules/@babel/runtime/regenerator/index.js","webpack://joy-ui/./src/store/utils.js","webpack://joy-ui/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://joy-ui/./src/store/entity/reducer.js","webpack://joy-ui/./src/store/const.js","webpack://joy-ui/./node_modules/redux-optimistic-ui/lib/index.js","webpack://joy-ui/./node_modules/regenerator-runtime/runtime.js","webpack://joy-ui/./src/store/entity/index.js","webpack://joy-ui/./src/store/ui.js","webpack://joy-ui/./src/store/entity/connector.js","webpack://joy-ui/./src/store/middlewares/optimistic.js","webpack://joy-ui/./src/store/middlewares/errorhandler.js","webpack://joy-ui/./node_modules/object-diff/index.js","webpack://joy-ui/./src/store/index.js","webpack://joy-ui/./node_modules/redux-optimistic-ui/lib/array-utils.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","originalModule","webpackPolyfill","children","require","createReducer","initialState","handlers","state","action","type","isPromise","Promise","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","then","fn","self","this","args","arguments","apply","err","undefined","findAll","api","entry","queries","queryText","meta","isLockUI","payload","loadMore","offset","limit","dispatch","getState","currentEntity","current","sortBy","field","direction","getEntity","id","selectEntity","ix","createEntity","data","updateEntity","old","find","changes","diff","updatedAt","fields","conditions","isOptimistic","saveEntity","updateAction","createAction","INITIAL_STATE","fromJS","queryTexts","Map","list","List","total","highlightId","highlightIx","isLoading","outOfUpateId","withMutations","mst","set","rows","setIn","updateIn","ls","concat","origin","insert","reduce","stack","item","push","getIn","size","code","UI_LOCK","API_ERROR","optimistic","ensureState","REVERT","COMMIT","BEGIN","_extends","assign","target","length","source","_arrayUtils","isOptimistState","keys","createState","beforeState","history","applyCommit","targetActionIndex","reducer","historyWithoutCommit","slice","nextOptimisticIndex","findIndex","isNotOptimistic","newHistory","newBeforeState","mutState","index","actionToCommit","newAction","_newHistory","splice","applyRevert","historyWithoutRevert","newCurrent","rawConfig","config","maxHistory","historySize","_ref","console","Error","nextState","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","GenStateSuspendedStart","method","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","TypeError","resultName","next","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","isLock","reason","details","mts","mutableState","mapStateToPropsDefault","entity","entityActions","nextTransactionId","store","transactionId","ressync","a","fail","isSuccess","success","strict","opts","subjects","keysLength","u","ref","equal","isStrictEqual","b","custom","middlewares","errorhandler","arr","predicate"],"mappings":"2BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,I,kBCnErDhC,EAAOD,QAfP,SAAyBkC,EAAKT,EAAKN,GAYjC,OAXIM,KAAOS,EACTtB,OAAOC,eAAeqB,EAAKT,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZqB,cAAc,EACdC,UAAU,IAGZF,EAAIT,GAAON,EAGNe,I,eCZTjC,EAAOD,QAAU,SAASqC,GACzB,IAAKA,EAAeC,gBAAiB,CACpC,IAAIrC,EAASW,OAAOY,OAAOa,GAEtBpC,EAAOsC,WAAUtC,EAAOsC,SAAW,IACxC3B,OAAOC,eAAeZ,EAAQ,SAAU,CACvCa,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOE,KAGhBS,OAAOC,eAAeZ,EAAQ,KAAM,CACnCa,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOC,KAGhBU,OAAOC,eAAeZ,EAAQ,UAAW,CACxCa,YAAY,IAEbb,EAAOqC,gBAAkB,EAE1B,OAAOrC,I,cCtBRA,EAAOD,QAAUwC,QAAQ,c,gBCAzBvC,EAAOD,QAAU,EAAQ,K,+TCIlB,SAASyC,EAAcC,EAAcC,GACxC,OAAO,WAA+C,IAA9BC,EAA8B,uDAAtBF,EAAcG,EAAQ,uCAClD,OAAIF,EAASZ,eAAec,EAAOC,MACxBH,EAASE,EAAOC,MAAMF,EAAOC,GAE7BD,GAQZ,I,IAAMG,EAAY,SAAAf,GAAC,OAAIA,aAAagB,U,6FAb3BP,E,0EAaHM,E,0LCjBb,SAASE,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ7B,EAAK8B,GACpE,IACE,IAAIC,EAAON,EAAIzB,GAAK8B,GAChBpC,EAAQqC,EAAKrC,MACjB,MAAOsC,GAEP,YADAL,EAAOK,GAILD,EAAKE,KACPP,EAAQhC,GAER6B,QAAQG,QAAQhC,GAAOwC,KAAKN,EAAOC,GAwBvCrD,EAAOD,QApBP,SAA2B4D,GACzB,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIhB,SAAQ,SAAUG,EAASC,GACpC,IAAIF,EAAMU,EAAGK,MAAMJ,EAAME,GAEzB,SAASV,EAAMlC,GACb8B,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQnC,GAGlE,SAASmC,EAAOY,GACdjB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASY,GAGnEb,OAAMc,S,mhCCvBCC,EAAU,SAAAC,GAAG,OAAI,SAACC,EAAOC,EAASC,GAC3C,MAAO,CACH1B,KALY,cAMZ2B,KAAM,CACFH,QACAC,UACAC,YACAE,UAAU,GAEdC,QAASN,EAAID,QAAQE,EAAOC,MAMvBK,EAAW,SAAAP,GAAG,OAAI,SAACQ,EAAQC,GAAT,OAAmB,SAACC,EAAUC,GACzD,IAAMC,EAAgBD,IAAWjE,IAAI,UAAUmE,QACzCZ,EAAQW,EAAclE,IAAI,SAC1BwD,EAAUU,EAAclE,IAAI,WAClC,OAAOgE,EAAS,CACZjC,KAPU,YAQV2B,KAAM,CACFH,QACAC,UACAM,SACAC,SAEJH,QAASN,EAAID,QAAQE,EAAZ,KAAwBC,EAAxB,CAAiCvC,EAAG,CAAE6C,SAAQC,iBAOlDK,EAAS,SAAAd,GAAG,OAAI,SAACe,EAAOC,GAAR,OAAsB,SAACN,EAAUC,GAC1D,IAAMC,EAAgBD,IAAWjE,IAAI,UAAUmE,QACzCZ,EAAQW,EAAclE,IAAI,SAC1BwD,EAAUU,EAAclE,IAAI,WAIlC,OAFAwD,EAAQY,OAASC,GAASC,EAAW,CAACD,EAAOC,QAAalB,EAEnDY,EAAS,CACZjC,KAXc,gBAYd2B,KAAM,CACFW,QACAC,YACAf,QACAC,WAEJI,QAASN,EAAID,QAAQE,EAAOC,QAMvBe,EAAY,SAAAjB,GAAG,OAAI,SAACC,EAAOiB,GACpC,MAAO,CACHzC,KAJe,iBAKf2B,KAAM,CACFH,QACAiB,KACAb,UAAU,GAEdC,QAASN,EAAIiB,UAAUhB,EAAOiB,MAKzBC,EAAe,SAACC,EAAIF,GAC7B,MAAO,CACHzC,KAHc,gBAId2C,KACAF,OAMFG,EAAe,SAAArB,GAAG,OAAI,SAACC,EAAOqB,GAChC,MAAO,CACH7C,KAJc,gBAKd2B,KAAM,CAAEH,SACRK,QAASN,EAAIqB,aAAapB,EAAOqB,MAMnCC,EAAe,SAAAvB,GAAG,OAAI,SAACC,EAAOqB,GAAR,OAAiB,SAACZ,EAAUC,GACpD,IAAMa,EAAMb,IACPjE,IAAI,UACJmE,QAAQnE,IAAI,QACZ+E,MAAK,SAAA5F,GAAC,OAAIA,EAAEqF,KAAOI,EAAKJ,MACvBQ,EAAUC,IAAKH,EAAKF,GAClBJ,EAAkBM,EAAlBN,GAAIU,EAAcJ,EAAdI,UACNC,EAAS,EAAH,GAAQH,GACdI,EAAa,CAAEZ,KAAIU,aAEzB,OAAOlB,EAAS,CACZjC,KAbc,gBAcd2B,KAAM,CACF2B,cAAc,EACd9B,QACA4B,SACAC,cAEJxB,QAASN,EAAIuB,aAAatB,EAAO4B,EAAQC,QAIpCE,EAAa,SAAAhC,GAAG,OAAI,SAACC,EAAOqB,GAAR,OAAiB,SAACZ,EAAUC,GACzD,IAAMsB,EAAeV,EAAavB,GAC5BkC,EAAeb,EAAarB,GAClC,OAAOsB,EAAKJ,GAAKR,EAASuB,EAAahC,EAAOqB,IAASZ,EAASwB,EAAajC,EAAOqB,OAGlFa,EAAgBC,iBAAO,CACzBnC,MAAO,GACPoC,WAAYC,cAAI,IAChBpC,QAAS,GACTY,OAAQwB,cAAI,CACRvB,MAAO,KACPC,UAAW,OAEfuB,KAAMC,eAAK,IACXC,MAAO,EACPC,YAAa,KACbC,YAAa,EACbvD,MAAO,KACPwD,UAAW,KACXC,aAAc,OAGZvE,GAAQ,WAvIc,uBAuId,SACYC,EAAOC,GACzB,OAAOD,EAAMuE,eAAc,SAAAC,GACvBA,EAAIC,IAAI,aAAa,SAHnB,MAtIgB,yBAsIhB,SAMczE,EAAOC,GAAQ,IAEpB8C,EAEX9C,EAFA8B,QAAWgB,KAFoB,EAI/B9C,EADA4B,KAAQF,EAHuB,EAGvBA,QAASD,EAHc,EAGdA,MAAOE,EAHO,EAGPA,UAE5B,OAAO5B,EAAMuE,eAAc,SAAAC,GACvBA,EAAIC,IAAI,QAAS/C,GACjB8C,EAAIC,IAAI,UAAW9C,GACnB6C,EAAIC,IAAI,OAAQR,eAAKlB,EAAK2B,OAC1BF,EAAIC,IAAI,QAAS1B,EAAKmB,OACtBM,EAAIC,IAAI,SAAU1B,EAAKd,QACvBuC,EAAIC,IAAI,QAAS1B,EAAKb,OACtBsC,EAAIC,IAAI,aAAa,GACrBD,EAAIC,IAAI,eAAgB,MACpB7C,GAAW4C,EAAIG,MAAM,CAAC,aAAcjD,GAAQE,SApB9C,MAvHc,uBAuHd,SAuBY5B,EAAOC,GAAQ,IAElB8C,EACX9C,EADA8B,QAAWgB,KAEf,OAAO/C,EAAMuE,eAAc,SAAAC,GACvBA,EAAII,SAAS,CAAC,SAAS,SAAAC,GAAE,OAAIA,EAAGC,OAAO/B,EAAK2B,SAC5CF,EAAIC,IAAI,SAAU1B,EAAKd,QACvBuC,EAAIC,IAAI,QAAS1B,EAAKb,aA9BpB,MArGc,yBAqGd,SAiCclC,EAAOC,GAAQ,MACCA,EAAO8E,OAApClD,KAAOW,EADqB,EACrBA,MAAOC,EADc,EACdA,UACrB,OAAOzC,EAAMuE,eAAc,SAAAC,GACvBA,EAAIG,MAAM,CAAC,SAAS,SAAUnC,GAC9BgC,EAAIG,MAAM,CAAC,SAAS,aAAclC,GAClC+B,EAAIC,IAAI,aAAa,SAtCnB,MApGkB,2BAoGlB,SA0CgBzE,EAAOC,GAAQ,IAEtB8C,EACX9C,EADA8B,QAAWgB,KAEf,OAAO/C,EAAMuE,eAAc,SAAAC,GACvBA,EAAIC,IAAI,OAAQR,eAAKlB,EAAK2B,OAC1BF,EAAIC,IAAI,SAAU1B,EAAKd,QACvBuC,EAAIC,IAAI,QAAS1B,EAAKb,OACtBsC,EAAIC,IAAI,aAAa,SAlDnB,MAlEQ,iBAkER,SAqDMzE,EArDN,GAqDyB,IAAV6C,EAAU,EAAVA,GAAIF,EAAM,EAANA,GACzB,OAAO3C,EAAMuE,eAAc,SAAAC,GACvBA,EAAIC,IAAI,cAAe9B,GACvB6B,EAAIC,IAAI,cAAe5B,SAxDrB,MAzDQ,iBAyDR,SA2DM7C,GACZ,OAAOA,EAAMuE,eAAc,SAAAC,GACvBA,EAAIC,IAAI,aAAa,SA7DnB,MAxDkB,2BAwDlB,SAgEgBzE,EAAOC,GAAQ,IAEtB8C,EACX9C,EADA8B,QAAWgB,KAEf,OAAO/C,EAAMuE,eAAc,SAAAC,GACvBA,EAAII,SAAS,CAAC,SAAS,SAAArH,GAAC,OAAIA,EAAEyH,OAAO,EAAGjC,MACxCyB,EAAIC,IAAI,cAAe1B,EAAKJ,IAC5B6B,EAAIC,IAAI,cAAe,GACvBD,EAAIC,IAAI,QAASD,EAAIrG,IAAI,SAAW,SAxElC,MA/CQ,iBA+CR,SA2EM6B,EAAOC,GAAQ,MAGvBA,EADA4B,KAAQyB,EAFe,EAEfA,OAAQC,EAFO,EAEPA,WAEpB,OAAOvD,EAAMuE,eAAc,SAAAC,GACvBA,EAAII,SAAS,CAAC,SAAS,SAAArH,GAAC,OACpBA,EAAE0H,QACE,SAACC,EAAOC,GAAR,OACIA,EAAKxC,KAAOY,EAAWZ,GACjBuC,EAAME,KAAKD,GACXD,EAAME,KAAN,KAAgBD,EAAhB,GAAyB7B,MACnCW,eAAK,QAGbO,EAAIC,IAAI,cAAelB,EAAWZ,IAClC6B,EAAIC,IAAI,aAAa,SA1FnB,MA9Ce,wBA8Cf,SA6FazE,EAAOC,GAAQ,IAEnB8C,EACX9C,EADA8B,QAAWgB,KAEf,OAAO/C,EAAMuE,eAAc,SAAAC,GACvBA,EAAII,SAAS,CAAC,SAAS,SAAArH,GAAC,OACpBA,EAAE0H,QACE,SAACC,EAAOC,GAAR,OACIA,EAAKxC,KAAOI,EAAKJ,GACXuC,EAAME,KAAKD,GACXD,EAAME,KAAKrC,KACrBkB,eAAK,cAxGX,MA/EmB,4BA+EnB,SA6GiBjE,EAAOC,GAAQ,IAEvB8C,EACX9C,EADA8B,QAAWgB,KAGf,OAAO/C,EAAMqF,MAAM,CAAC,SAASC,KACvBtF,EAAMuE,eAAc,SAAAC,GAClBA,EAAII,SAAS,CAAC,SAAS,SAAArH,GAAC,OACpBA,EAAE0H,QACE,SAACC,EAAOC,GAAR,OACIA,EAAKxC,KAAOI,EAAKJ,GACXuC,EAAME,KAAKD,GACXD,EAAME,KAAKrC,KACrBkB,eAAK,QAGbO,EAAIC,IAAI,eAAgB,SAE1BzE,EAAMuE,eAAc,SAAAC,GAClBA,EAAIG,MAAM,CAAC,QAASV,eAAK,CAAClB,KAC1ByB,EAAIC,IAAI,eAAgB,YAjI1B,MAzII,aAyIJ,SAoIEzE,EAAOC,GAAQ,MAMnBA,EAJA8E,OACeQ,EAHI,EAGfxD,QAAWwD,KACJhC,EAJQ,EAIf1B,KAAO0B,WAGf,MAAY,gBAATgC,EACQvF,EAAMuE,eAAc,SAAAC,GACvBA,EAAIC,IAAI,eAAgBlB,EAAWZ,IACnC6B,EAAIC,IAAI,aAAa,MAItBzE,EAAMuE,eAAc,SAAAC,GACvBA,EAAIC,IAAI,aAAa,SAnJnB,G,EAuJC5E,wBAAc+D,EAAe7D,GAA7B,O,6FAhSG,Y,+EACE,c,iFACQ,sB,yFACE,wB,2FACjByB,E,6EAaK,Y,+EACU,sB,yFACfQ,E,8EAgBS,gB,mFACM,wB,2FACI,0B,6FACnBO,E,4EAmBU,iB,oFACU,2B,8FACpBG,E,+EAYS,gB,mFACTE,E,kFAQS,gB,mFACU,0B,6FAC1BE,E,kFAQgB,gB,mFACO,uB,0FACvBE,E,kFAsBOS,E,gFAMPG,E,mFAiBA7D,E,4iBC7IOyF,EAAU,UACVC,EAAY,a,6FADZD,E,oEACAC,E,8MCCbzH,OAAOC,eAAeb,EAAS,aAAc,CAC3CmB,OAAO,IAETnB,EAAQsI,WAAatI,EAAQuI,YAAcvI,EAAQwI,OAASxI,EAAQyI,OAASzI,EAAQ0I,WAAQvE,EAE7F,IAAIwE,EAAW/H,OAAOgI,QAAU,SAAUC,GAAU,IAAK,IAAI3I,EAAI,EAAGA,EAAI8D,UAAU8E,OAAQ5I,IAAK,CAAE,IAAI6I,EAAS/E,UAAU9D,GAAI,IAAK,IAAIuB,KAAOsH,EAAcnI,OAAOkB,UAAUC,eAAe1B,KAAK0I,EAAQtH,KAAQoH,EAAOpH,GAAOsH,EAAOtH,IAAY,OAAOoH,GAEnPG,EAAc,EAAQ,IAEtBN,EAAQ1I,EAAQ0I,MAAQ,mBACxBD,EAASzI,EAAQyI,OAAS,oBAC1BD,EAASxI,EAAQwI,OAAS,oBAE1BS,EAAkB,SAAyBrG,GAC7C,OAAOA,GAAuC,IAA9BhC,OAAOsI,KAAKtG,GAAOkG,QAAgBlG,EAAMb,eAAe,gBAAkBa,EAAMb,eAAe,YAAca,EAAMb,eAAe,YAGhJwG,EAAcvI,EAAQuI,YAAc,SAAqB3F,GAC3D,OAAOqG,EAAgBrG,GAASA,EAAMsC,QAAUtC,GAG9CuG,EAAc,SAAqBvG,GACrC,MAAO,CACLwG,iBAAajF,EACbkF,QAAS,GACTnE,QAAStC,IAIT0G,EAAc,SAAqB1G,EAAO2G,EAAmBC,GAC/D,IAAIH,EAAUzG,EAAMyG,QAGpB,GAA0B,IAAtBE,EAAyB,CAC3B,IAAIE,EAAuBJ,EAAQK,MAAM,GACrCC,GAAsB,EAAIX,EAAYY,WAAWH,GAAsB,SAAU5G,GACnF,OAAOA,EAAO4B,MAAQ5B,EAAO4B,KAAK6D,aAAezF,EAAO4B,KAAK6D,WAAWuB,iBAAmBhH,EAAO4B,KAAK6D,WAAW/C,MAGpH,IAA6B,IAAzBoE,EACF,OAAOhB,EAAS,GAAI/F,EAAO,CACzByG,QAAS,GACTD,iBAAajF,IAIjB,IAAI2F,EAAaL,EAAqBC,MAAMC,GAExCI,EAAiBV,EAAQxB,QAAO,SAAUmC,EAAUnH,EAAQoH,GAC9D,OAAOA,GAASN,EAAsBH,EAAQQ,EAAUnH,GAAUmH,IACjEpH,EAAMwG,aAET,OAAOT,EAAS,GAAI/F,EAAO,CACzByG,QAASS,EACTV,YAAaW,IAIf,IAAIG,EAAiBb,EAAQE,GAEzBY,EAAYvJ,OAAOgI,OAAO,GAAIsB,EAAgB,CAChDzF,KAAM7D,OAAOgI,OAAO,GAAIsB,EAAezF,KAAM,CAAE6D,WAAY,SAEzD8B,EAAcxH,EAAMyG,QAAQK,QAEhC,OADAU,EAAYC,OAAOd,EAAmB,EAAGY,GAClCxB,EAAS,GAAI/F,EAAO,CACzByG,QAASe,KAKXE,EAAc,SAAqB1H,EAAO2G,EAAmBC,GAC/D,IAAIJ,EAAcxG,EAAMwG,YACpBC,EAAUzG,EAAMyG,QAEhBS,OAAa,EAEjB,GAA0B,IAAtBP,EAAyB,CAC3B,IAAIgB,EAAuBlB,EAAQK,MAAM,GACrCC,GAAsB,EAAIX,EAAYY,WAAWW,GAAsB,SAAU1H,GACnF,OAAOA,EAAO4B,MAAQ5B,EAAO4B,KAAK6D,aAAezF,EAAO4B,KAAK6D,WAAWuB,iBAAmBhH,EAAO4B,KAAK6D,WAAW/C,MAGpH,IAA6B,IAAzBoE,EACF,OAAOhB,EAAS,GAAI/F,EAAO,CACzByG,QAAS,GACTnE,QAASqF,EAAqB1C,QAAO,SAAU5F,EAAGY,GAChD,OAAO2G,EAAQvH,EAAGY,KACjBuG,GACHA,iBAAajF,IAGjB2F,EAAaS,EAAqBb,MAAMC,QAExCG,EAAaT,EAAQK,SACVW,OAAOd,EAAmB,GAEvC,IAAIiB,EAAaV,EAAWjC,QAAO,SAAU5F,EAAGY,GAC9C,OAAO2G,EAAQvH,EAAGY,KACjBuG,GACH,OAAOT,EAAS,GAAI/F,EAAO,CACzByG,QAASS,EACT5E,QAASsF,EACTpB,YAAaA,KAIApJ,EAAQsI,WAAa,SAAoBkB,GACxD,IAAIiB,EAAYzG,UAAU8E,OAAS,QAAsB3E,IAAjBH,UAAU,GAAmBA,UAAU,GAAK,GAEhF0G,EAAS9J,OAAOgI,OAAO,CACzB+B,WAAY,KACXF,GAEH,OAAO,SAAU7H,EAAOC,QACRsB,IAAVvB,GAAwBqG,EAAgBrG,KAC1CA,EAAQuG,EAAYK,EAAQjB,EAAY3F,GAAQ,MAElD,IAAIgI,EAAchI,EAAMyG,QAAQP,OAE5B+B,EAAOhI,EAAO4B,MAAQ5B,EAAO4B,KAAK6D,YAAc,GAChDxF,EAAO+H,EAAK/H,KACZyC,EAAKsF,EAAKtF,GAKd,GAAIqF,EAAa,CACf,GAAI9H,IAAS2F,GAAU3F,IAAS0F,EAK9B,OAJIoC,EAAcF,EAAOC,YACvBG,QAAQrH,MAAM,gMAGTkF,EAAS,GAAI/F,EAAO,CACzByG,QAASzG,EAAMyG,QAAQ3B,OAAO,CAAC7E,IAC/BqC,QAASsE,EAAQ5G,EAAMsC,QAASrC,KAIpC,IAAI0G,GAAoB,EAAIP,EAAYY,WAAWhH,EAAMyG,SAAS,SAAUxG,GAC1E,OAAOA,EAAO4B,MAAQ5B,EAAO4B,KAAK6D,YAAczF,EAAO4B,KAAK6D,WAAW/C,KAAOA,KAEhF,IAA2B,IAAvBgE,EACF,MAAM,IAAIwB,MAAM,0BAA4BjI,IAAS2F,EAAS,SAAW,UAAY,kBAAoBlD,EAAK,oBAIhH1C,EAAO4B,KAAK6D,WAAWuB,iBAAkB,EAGzC,IAAImB,EAAYrC,EAAS,GAAI/F,EAAO,CAClCyG,QAASzG,EAAMyG,QAAQ3B,OAAO,CAAC7E,IAC/BqC,QAASsE,EAAQ5G,EAAMsC,QAASrC,KAIlC,OADgBC,IAAS2F,EAASa,EAAcgB,GAC/BU,EAAWzB,EAAmBC,GAGjD,OACSb,EAAS,GAAI/F,EADlBE,IAAS4F,EACgB,CACzBW,QAASzG,EAAMyG,QAAQ3B,OAAO,CAAC7E,IAC/BqC,QAASsE,EAAQ5G,EAAMsC,QAASrC,GAChCuG,YAAaxG,EAAMsC,SAKI,CACzBA,QAASsE,EAAQ5G,EAAMsC,QAASrC,Q,mBCpKtC,IAAIoI,EAAW,SAAUjL,GACvB,aAEA,IAEImE,EAFA+G,EAAKtK,OAAOkB,UACZqJ,EAASD,EAAGnJ,eAEZqJ,EAA4B,mBAAXnK,OAAwBA,OAAS,GAClDoK,EAAiBD,EAAQE,UAAY,aACrCC,EAAsBH,EAAQI,eAAiB,kBAC/CC,EAAoBL,EAAQlK,aAAe,gBAE/C,SAASwK,EAAKC,EAASC,EAAS/H,EAAMgI,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQ9J,qBAAqBiK,EAAYH,EAAUG,EAC/EC,EAAYpL,OAAOY,OAAOsK,EAAehK,WACzCmK,EAAU,IAAIC,EAAQL,GAAe,IAMzC,OAFAG,EAAUG,QAkMZ,SAA0BR,EAAS9H,EAAMoI,GACvC,IAAIrJ,EAAQwJ,EAEZ,OAAO,SAAgBC,EAAQ9I,GAC7B,GAAIX,IAAU0J,EACZ,MAAM,IAAIvB,MAAM,gCAGlB,GAAInI,IAAU2J,EAAmB,CAC/B,GAAe,UAAXF,EACF,MAAM9I,EAKR,OAAOiJ,IAMT,IAHAP,EAAQI,OAASA,EACjBJ,EAAQ1I,IAAMA,IAED,CACX,IAAIkJ,EAAWR,EAAQQ,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUR,GACnD,GAAIS,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBT,EAAQI,OAGVJ,EAAQY,KAAOZ,EAAQa,MAAQb,EAAQ1I,SAElC,GAAuB,UAAnB0I,EAAQI,OAAoB,CACrC,GAAIzJ,IAAUwJ,EAEZ,MADAxJ,EAAQ2J,EACFN,EAAQ1I,IAGhB0I,EAAQc,kBAAkBd,EAAQ1I,SAEN,WAAnB0I,EAAQI,QACjBJ,EAAQe,OAAO,SAAUf,EAAQ1I,KAGnCX,EAAQ0J,EAER,IAAIW,EAASC,EAASvB,EAAS9H,EAAMoI,GACrC,GAAoB,WAAhBgB,EAAOnK,KAAmB,CAO5B,GAJAF,EAAQqJ,EAAQvI,KACZ6I,EACAY,EAEAF,EAAO1J,MAAQqJ,EACjB,SAGF,MAAO,CACLzL,MAAO8L,EAAO1J,IACdG,KAAMuI,EAAQvI,MAGS,UAAhBuJ,EAAOnK,OAChBF,EAAQ2J,EAGRN,EAAQI,OAAS,QACjBJ,EAAQ1I,IAAM0J,EAAO1J,OA1QP6J,CAAiBzB,EAAS9H,EAAMoI,GAE7CD,EAcT,SAASkB,EAAStJ,EAAI1B,EAAKqB,GACzB,IACE,MAAO,CAAET,KAAM,SAAUS,IAAKK,EAAGvD,KAAK6B,EAAKqB,IAC3C,MAAOW,GACP,MAAO,CAAEpB,KAAM,QAASS,IAAKW,IAhBjClE,EAAQ0L,KAAOA,EAoBf,IAAIU,EAAyB,iBACzBe,EAAyB,iBACzBb,EAAoB,YACpBC,EAAoB,YAIpBK,EAAmB,GAMvB,SAASb,KACT,SAASsB,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxBA,EAAkBlC,GAAkB,WAClC,OAAOvH,MAGT,IAAI0J,EAAW5M,OAAO6M,eAClBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MAC/DD,GACAA,IAA4BxC,GAC5BC,EAAO9K,KAAKqN,EAAyBrC,KAGvCkC,EAAoBG,GAGtB,IAAIE,EAAKN,EAA2BxL,UAClCiK,EAAUjK,UAAYlB,OAAOY,OAAO+L,GAQtC,SAASM,EAAsB/L,GAC7B,CAAC,OAAQ,QAAS,UAAUgM,SAAQ,SAASzB,GAC3CvK,EAAUuK,GAAU,SAAS9I,GAC3B,OAAOO,KAAKqI,QAAQE,EAAQ9I,OAoClC,SAASwK,EAAc/B,GAgCrB,IAAIgC,EAgCJlK,KAAKqI,QA9BL,SAAiBE,EAAQ9I,GACvB,SAAS0K,IACP,OAAO,IAAIjL,SAAQ,SAASG,EAASC,IAnCzC,SAAS8K,EAAO7B,EAAQ9I,EAAKJ,EAASC,GACpC,IAAI6J,EAASC,EAASlB,EAAUK,GAASL,EAAWzI,GACpD,GAAoB,UAAhB0J,EAAOnK,KAEJ,CACL,IAAIqL,EAASlB,EAAO1J,IAChBpC,EAAQgN,EAAOhN,MACnB,OAAIA,GACiB,iBAAVA,GACPgK,EAAO9K,KAAKc,EAAO,WACd6B,QAAQG,QAAQhC,EAAMiN,SAASzK,MAAK,SAASxC,GAClD+M,EAAO,OAAQ/M,EAAOgC,EAASC,MAC9B,SAASc,GACVgK,EAAO,QAAShK,EAAKf,EAASC,MAI3BJ,QAAQG,QAAQhC,GAAOwC,MAAK,SAAS0K,GAI1CF,EAAOhN,MAAQkN,EACflL,EAAQgL,MACP,SAAS1K,GAGV,OAAOyK,EAAO,QAASzK,EAAON,EAASC,MAvBzCA,EAAO6J,EAAO1J,KAiCZ2K,CAAO7B,EAAQ9I,EAAKJ,EAASC,MAIjC,OAAO4K,EAaLA,EAAkBA,EAAgBrK,KAChCsK,EAGAA,GACEA,KA+GV,SAAStB,EAAoBF,EAAUR,GACrC,IAAII,EAASI,EAASnB,SAASW,EAAQI,QACvC,GAAIA,IAAWlI,EAAW,CAKxB,GAFA8H,EAAQQ,SAAW,KAEI,UAAnBR,EAAQI,OAAoB,CAE9B,GAAII,EAASnB,SAAiB,SAG5BW,EAAQI,OAAS,SACjBJ,EAAQ1I,IAAMY,EACdwI,EAAoBF,EAAUR,GAEP,UAAnBA,EAAQI,QAGV,OAAOO,EAIXX,EAAQI,OAAS,QACjBJ,EAAQ1I,IAAM,IAAI+K,UAChB,kDAGJ,OAAO1B,EAGT,IAAIK,EAASC,EAASb,EAAQI,EAASnB,SAAUW,EAAQ1I,KAEzD,GAAoB,UAAhB0J,EAAOnK,KAIT,OAHAmJ,EAAQI,OAAS,QACjBJ,EAAQ1I,IAAM0J,EAAO1J,IACrB0I,EAAQQ,SAAW,KACZG,EAGT,IAAIpJ,EAAOyJ,EAAO1J,IAElB,OAAMC,EAOFA,EAAKE,MAGPuI,EAAQQ,EAAS8B,YAAc/K,EAAKrC,MAGpC8K,EAAQuC,KAAO/B,EAASgC,QAQD,WAAnBxC,EAAQI,SACVJ,EAAQI,OAAS,OACjBJ,EAAQ1I,IAAMY,GAUlB8H,EAAQQ,SAAW,KACZG,GANEpJ,GA3BPyI,EAAQI,OAAS,QACjBJ,EAAQ1I,IAAM,IAAI+K,UAAU,oCAC5BrC,EAAQQ,SAAW,KACZG,GAoDX,SAAS8B,EAAaC,GACpB,IAAIrK,EAAQ,CAAEsK,OAAQD,EAAK,IAEvB,KAAKA,IACPrK,EAAMuK,SAAWF,EAAK,IAGpB,KAAKA,IACPrK,EAAMwK,WAAaH,EAAK,GACxBrK,EAAMyK,SAAWJ,EAAK,IAGxB7K,KAAKkL,WAAWhH,KAAK1D,GAGvB,SAAS2K,EAAc3K,GACrB,IAAI2I,EAAS3I,EAAM4K,YAAc,GACjCjC,EAAOnK,KAAO,gBACPmK,EAAO1J,IACde,EAAM4K,WAAajC,EAGrB,SAASf,EAAQL,GAIf/H,KAAKkL,WAAa,CAAC,CAAEJ,OAAQ,SAC7B/C,EAAYiC,QAAQY,EAAc5K,MAClCA,KAAKqL,OAAM,GA8Bb,SAASxB,EAAOyB,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAAS/D,GAC9B,GAAIgE,EACF,OAAOA,EAAehP,KAAK+O,GAG7B,GAA6B,mBAAlBA,EAASZ,KAClB,OAAOY,EAGT,IAAKE,MAAMF,EAAStG,QAAS,CAC3B,IAAI5I,GAAK,EAAGsO,EAAO,SAASA,IAC1B,OAAStO,EAAIkP,EAAStG,QACpB,GAAIqC,EAAO9K,KAAK+O,EAAUlP,GAGxB,OAFAsO,EAAKrN,MAAQiO,EAASlP,GACtBsO,EAAK9K,MAAO,EACL8K,EAOX,OAHAA,EAAKrN,MAAQgD,EACbqK,EAAK9K,MAAO,EAEL8K,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMhC,GAIjB,SAASA,IACP,MAAO,CAAErL,MAAOgD,EAAWT,MAAM,GA+MnC,OAxmBA2J,EAAkBvL,UAAY8L,EAAG2B,YAAcjC,EAC/CA,EAA2BiC,YAAclC,EACzCC,EAA2B7B,GACzB4B,EAAkBmC,YAAc,oBAYlCxP,EAAQyP,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAOH,YAClD,QAAOI,IACHA,IAAStC,GAG2B,uBAAnCsC,EAAKH,aAAeG,EAAKlP,QAIhCT,EAAQ4P,KAAO,SAASF,GAUtB,OATI9O,OAAOiP,eACTjP,OAAOiP,eAAeH,EAAQpC,IAE9BoC,EAAOI,UAAYxC,EACb7B,KAAqBiE,IACzBA,EAAOjE,GAAqB,sBAGhCiE,EAAO5N,UAAYlB,OAAOY,OAAOoM,GAC1B8B,GAOT1P,EAAQ+P,MAAQ,SAASxM,GACvB,MAAO,CAAE6K,QAAS7K,IAsEpBsK,EAAsBE,EAAcjM,WACpCiM,EAAcjM,UAAUyJ,GAAuB,WAC7C,OAAOzH,MAET9D,EAAQ+N,cAAgBA,EAKxB/N,EAAQgQ,MAAQ,SAASrE,EAASC,EAAS/H,EAAMgI,GAC/C,IAAIoE,EAAO,IAAIlC,EACbrC,EAAKC,EAASC,EAAS/H,EAAMgI,IAG/B,OAAO7L,EAAQyP,oBAAoB7D,GAC/BqE,EACAA,EAAKzB,OAAO7K,MAAK,SAASwK,GACxB,OAAOA,EAAOzK,KAAOyK,EAAOhN,MAAQ8O,EAAKzB,WAuKjDX,EAAsBD,GAEtBA,EAAGnC,GAAqB,YAOxBmC,EAAGvC,GAAkB,WACnB,OAAOvH,MAGT8J,EAAGsC,SAAW,WACZ,MAAO,sBAkCTlQ,EAAQkJ,KAAO,SAAStH,GACtB,IAAIsH,EAAO,GACX,IAAK,IAAIzH,KAAOG,EACdsH,EAAKlB,KAAKvG,GAMZ,OAJAyH,EAAKiH,UAIE,SAAS3B,IACd,KAAOtF,EAAKJ,QAAQ,CAClB,IAAIrH,EAAMyH,EAAKkH,MACf,GAAI3O,KAAOG,EAGT,OAFA4M,EAAKrN,MAAQM,EACb+M,EAAK9K,MAAO,EACL8K,EAQX,OADAA,EAAK9K,MAAO,EACL8K,IAsCXxO,EAAQ2N,OAASA,EAMjBzB,EAAQpK,UAAY,CAClByN,YAAarD,EAEbiD,MAAO,SAASkB,GAcd,GAbAvM,KAAKwM,KAAO,EACZxM,KAAK0K,KAAO,EAGZ1K,KAAK+I,KAAO/I,KAAKgJ,MAAQ3I,EACzBL,KAAKJ,MAAO,EACZI,KAAK2I,SAAW,KAEhB3I,KAAKuI,OAAS,OACdvI,KAAKP,IAAMY,EAEXL,KAAKkL,WAAWlB,QAAQmB,IAEnBoB,EACH,IAAK,IAAI5P,KAAQqD,KAEQ,MAAnBrD,EAAK8P,OAAO,IACZpF,EAAO9K,KAAKyD,KAAMrD,KACjB6O,OAAO7O,EAAKiJ,MAAM,MACrB5F,KAAKrD,GAAQ0D,IAMrBqM,KAAM,WACJ1M,KAAKJ,MAAO,EAEZ,IACI+M,EADY3M,KAAKkL,WAAW,GACLE,WAC3B,GAAwB,UAApBuB,EAAW3N,KACb,MAAM2N,EAAWlN,IAGnB,OAAOO,KAAK4M,MAGd3D,kBAAmB,SAAS4D,GAC1B,GAAI7M,KAAKJ,KACP,MAAMiN,EAGR,IAAI1E,EAAUnI,KACd,SAAS8M,EAAOC,EAAKC,GAYnB,OAXA7D,EAAOnK,KAAO,QACdmK,EAAO1J,IAAMoN,EACb1E,EAAQuC,KAAOqC,EAEXC,IAGF7E,EAAQI,OAAS,OACjBJ,EAAQ1I,IAAMY,KAGN2M,EAGZ,IAAK,IAAI5Q,EAAI4D,KAAKkL,WAAWlG,OAAS,EAAG5I,GAAK,IAAKA,EAAG,CACpD,IAAIoE,EAAQR,KAAKkL,WAAW9O,GACxB+M,EAAS3I,EAAM4K,WAEnB,GAAqB,SAAjB5K,EAAMsK,OAIR,OAAOgC,EAAO,OAGhB,GAAItM,EAAMsK,QAAU9K,KAAKwM,KAAM,CAC7B,IAAIS,EAAW5F,EAAO9K,KAAKiE,EAAO,YAC9B0M,EAAa7F,EAAO9K,KAAKiE,EAAO,cAEpC,GAAIyM,GAAYC,EAAY,CAC1B,GAAIlN,KAAKwM,KAAOhM,EAAMuK,SACpB,OAAO+B,EAAOtM,EAAMuK,UAAU,GACzB,GAAI/K,KAAKwM,KAAOhM,EAAMwK,WAC3B,OAAO8B,EAAOtM,EAAMwK,iBAGjB,GAAIiC,GACT,GAAIjN,KAAKwM,KAAOhM,EAAMuK,SACpB,OAAO+B,EAAOtM,EAAMuK,UAAU,OAG3B,KAAImC,EAMT,MAAM,IAAIjG,MAAM,0CALhB,GAAIjH,KAAKwM,KAAOhM,EAAMwK,WACpB,OAAO8B,EAAOtM,EAAMwK,gBAU9B9B,OAAQ,SAASlK,EAAMS,GACrB,IAAK,IAAIrD,EAAI4D,KAAKkL,WAAWlG,OAAS,EAAG5I,GAAK,IAAKA,EAAG,CACpD,IAAIoE,EAAQR,KAAKkL,WAAW9O,GAC5B,GAAIoE,EAAMsK,QAAU9K,KAAKwM,MACrBnF,EAAO9K,KAAKiE,EAAO,eACnBR,KAAKwM,KAAOhM,EAAMwK,WAAY,CAChC,IAAImC,EAAe3M,EACnB,OAIA2M,IACU,UAATnO,GACS,aAATA,IACDmO,EAAarC,QAAUrL,GACvBA,GAAO0N,EAAanC,aAGtBmC,EAAe,MAGjB,IAAIhE,EAASgE,EAAeA,EAAa/B,WAAa,GAItD,OAHAjC,EAAOnK,KAAOA,EACdmK,EAAO1J,IAAMA,EAET0N,GACFnN,KAAKuI,OAAS,OACdvI,KAAK0K,KAAOyC,EAAanC,WAClBlC,GAGF9I,KAAKoN,SAASjE,IAGvBiE,SAAU,SAASjE,EAAQ8B,GACzB,GAAoB,UAAhB9B,EAAOnK,KACT,MAAMmK,EAAO1J,IAcf,MAXoB,UAAhB0J,EAAOnK,MACS,aAAhBmK,EAAOnK,KACTgB,KAAK0K,KAAOvB,EAAO1J,IACM,WAAhB0J,EAAOnK,MAChBgB,KAAK4M,KAAO5M,KAAKP,IAAM0J,EAAO1J,IAC9BO,KAAKuI,OAAS,SACdvI,KAAK0K,KAAO,OACa,WAAhBvB,EAAOnK,MAAqBiM,IACrCjL,KAAK0K,KAAOO,GAGPnC,GAGTuE,OAAQ,SAASrC,GACf,IAAK,IAAI5O,EAAI4D,KAAKkL,WAAWlG,OAAS,EAAG5I,GAAK,IAAKA,EAAG,CACpD,IAAIoE,EAAQR,KAAKkL,WAAW9O,GAC5B,GAAIoE,EAAMwK,aAAeA,EAGvB,OAFAhL,KAAKoN,SAAS5M,EAAM4K,WAAY5K,EAAMyK,UACtCE,EAAc3K,GACPsI,IAKb,MAAS,SAASgC,GAChB,IAAK,IAAI1O,EAAI4D,KAAKkL,WAAWlG,OAAS,EAAG5I,GAAK,IAAKA,EAAG,CACpD,IAAIoE,EAAQR,KAAKkL,WAAW9O,GAC5B,GAAIoE,EAAMsK,SAAWA,EAAQ,CAC3B,IAAI3B,EAAS3I,EAAM4K,WACnB,GAAoB,UAAhBjC,EAAOnK,KAAkB,CAC3B,IAAIsO,EAASnE,EAAO1J,IACpB0L,EAAc3K,GAEhB,OAAO8M,GAMX,MAAM,IAAIrG,MAAM,0BAGlBsG,cAAe,SAASjC,EAAUb,EAAYE,GAa5C,OAZA3K,KAAK2I,SAAW,CACdnB,SAAUqC,EAAOyB,GACjBb,WAAYA,EACZE,QAASA,GAGS,SAAhB3K,KAAKuI,SAGPvI,KAAKP,IAAMY,GAGNyI,IAQJ5M,EAvrBK,CA8rBiBC,EAAOD,SAGtC,IACEsR,mBAAqBrG,EACrB,MAAOsG,GAUPC,SAAS,IAAK,yBAAdA,CAAwCvG,K,4PCltB3B3C,qBAAWkB,KAA1B,O,4hBCEMhD,EAAgBC,iBAAO,CACzBgL,QAAQ,EACRC,OAAQ,GACRC,QAAS,KACTlO,MAAO,OAGLd,GAAQ,WACTyF,KADS,SACAxF,EAAOC,GAAQ,IACb4O,EAA4B5O,EAA5B4O,OAAQC,EAAoB7O,EAApB6O,OAAQC,EAAY9O,EAAZ8O,QACxB,OAAO/O,EAAMuE,eAAc,SAAAyK,GACvBA,EAAIvK,IAAI,SAAUoK,GAClBG,EAAIvK,IAAI,SAAUoK,EAASC,EAAS,MACpCE,EAAIvK,IAAI,UAAWoK,EAASE,EAAU,YANpC,MASTtJ,KATS,SASEzF,EAAOC,GACf,OAAOD,EAAMuE,eAAc,SAAA0K,GACvBA,EAAaxK,IAAI,QAASxE,EAAO8B,eAX/B,G,EAgBClC,wBAAc+D,EAAe7D,GAA7B,O,6FAvBT6D,E,uEAOA7D,E,4hBCFOmP,EAAyB,SAAAlP,GAAK,MAAK,CAAEmP,OAAQnP,EAAM7B,IAAI,UAAUmE,UAEjE8M,EAAgB,SAAA3N,GAAG,MAAK,CACjCmB,iBACApB,QAASA,YAAQC,GACjBO,SAAUA,YAASP,GACnBc,OAAQA,YAAOd,GACfiB,UAAWA,YAAUjB,GACrBgC,WAAYA,YAAWhC,M,6FARdyN,E,8FAEAE,E,keCRTC,EAAoB,E,EACT,SAAAC,GAAK,OAAI,SAAA1D,GAAI,OAAI,SAAA3L,GAAU,IAC9BC,EAAwBD,EAAxBC,KAAM2B,EAAkB5B,EAAlB4B,KAAME,EAAY9B,EAAZ8B,QAEpB,QAAgBR,IAAZQ,QAAkCR,IAATM,EACzB,OAAO+J,EAAK3L,GAGXE,oBAAU4B,IACX6J,EAAK3L,GAR6B,IAqBlCsP,EAVI/L,EAA2B3B,EAA3B2B,aAAc1B,EAAaD,EAAbC,SAElBA,GACAwN,EAAMnN,SAAS,CACXjC,KAAMsF,IACNqJ,QAAQ,EACR9J,OAAQ9E,IAKZuD,GACA+L,EAAgBF,IAChBzD,EACI5N,OAAOgI,OAAO,GAAI/F,EAAQ,CACtBC,OACA2B,KAAM7D,OAAOgI,OAAO,GAAInE,EAAM,CAC1B6D,WAAY,CACRxF,KAAM4F,QACNnD,GAAI4M,SAMpB3D,EAAK,CACD1L,KAAM,GAAF,OAAKA,EAAL,YACJ6E,OAAQ9E,IAIhB,IAaMO,EAAM,+BAAG,WAAMgP,GAAN,iBAAAC,EAAA,sEACWD,EADX,aACLzN,EADK,OAEL2N,EAAO/L,EAAa,CACtB5B,UACAF,OACA3B,OACAyP,WAAW,EACXnM,eACA+L,kBAEJ3D,EAAK8D,GACS,CAAExP,OAAM2B,OAAME,WAXjB,2CAAH,sDAeZ,OAAOA,EAAQhB,MA5BC,SAAAxC,GACZ,IAAMqR,EAAUjM,EAAa,CACzB5B,QAASxD,EACTsD,OACA3B,OACAyP,WAAW,EACXnM,eACA+L,kBAGJ,OADA3D,EAAKgE,GACErR,IAkBkBiC,GAAtB,SAAsC,WACrCsB,GACAwN,EAAMnN,SAAS,CACXjC,KAAMsF,IACNqJ,QAAQ,EACR9J,OAAQ9E,UAMxB,SAAS0D,EAAT,GAOG,IANC5B,EAMD,EANCA,QACAF,EAKD,EALCA,KACA3B,EAID,EAJCA,KACAyP,EAGD,EAHCA,UACAnM,EAED,EAFCA,aACA+L,EACD,EADCA,cAEA,MAAO,CACHrP,KAAMsD,EAAY,UACTtD,EADS,YACDyP,EAAY,SAAW,UADtB,UAETzP,EAFS,YAEDyP,EAAY,YAAc,UAC3C5N,UACAF,KAAM2B,EACAxF,OAAOgI,OAAO,GAAInE,EAAM,CACpB6D,WAAY,CACRxF,KAAMyP,EAAY9J,SAASD,SAC3BjD,GAAI4M,KAGZ1N,GArGC,O,6FADXwN,E,+FAkFK1L,E,8gBCnFM,SAAA2L,GAAK,OAAI,SAAA1D,GAAI,OAAI,SAAA3L,GAC5B,OAAKE,oBAAUF,EAAO8B,SAIf6J,EAAK3L,GAAL,OAAmB,SAAA8E,GAatB,OAZAuK,EAAMnN,SAAS,CACXjC,KAAMuF,IACNV,WAUGA,KAhBA6G,EAAK3L,MAFL,O,wTCIf,SAAS4P,IACR,OAAOzM,EAAK,KAAM,GAAG0D,MAAMrJ,KAAK2D,UAAW,IAO5C,SAASgC,EAAM0M,EAAMC,GAWpB,IAVA,IAIIpS,EACA2I,EACA0J,EACAnR,EACAoR,EARA/J,EAAS6J,EAAS7J,OAClBgK,EAAMH,EAAS,GACf3M,EAAO,GACP+M,EAAQL,GAAQA,EAAKK,OAASC,EAOzB9S,EAAI,EAAEA,EAAI4I,EAAO5I,IAKzB,IAJAK,EAAIoS,EAASzS,GAEb0S,GADA1J,EAAOtI,OAAOsI,KAAK3I,IACDuI,OAEb+J,EAAI,EAAEA,EAAID,EAAWC,IAGpBE,EAAMxS,EAFXkB,EAAMyH,EAAK2J,IAEQC,EAAIrR,MACtBuE,EAAKvE,GAAOlB,EAAEkB,IAIjB,OAAOuE,EAGR,SAASgN,EAAeX,EAAGY,GAC1B,OAAOZ,IAAMY,EAxCdR,EAAOS,OAQP,SAAiBR,GAChB,OAAO1M,EAAK0M,EAAM,GAAGhJ,MAAMrJ,KAAK2D,UAAW,KAP5C/D,EAAOD,QAAUyS,G,wjBCCXU,EAAY,CAAE7K,eAAY8K,mB,4FAA1BD,E,0MCHNvS,OAAOC,eAAeb,EAAS,aAAc,CAC3CmB,OAAO,IAETnB,EAAQ4J,UACR,SAAmByJ,EAAKC,GAEtB,IADA,IAAInT,EAAIkT,EAAIvK,OACH5I,EAAI,EAAGA,EAAIC,EAAGD,IACrB,GAAIoT,EAAUD,EAAInT,IAChB,OAAOA,EAGX,OAAQ","file":"store.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 55);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = require(\"immutable\");","module.exports = require(\"regenerator-runtime\");\n","/**\n * @param {Object} initialState\n * @param {Object} handlers\n */\nexport function createReducer(initialState, handlers) {\n    return function reducer(state = initialState, action) {\n        if (handlers.hasOwnProperty(action.type)) {\n            return handlers[action.type](state, action);\n        } else {\n            return state;\n        }\n    };\n}\n\n/**\n* @param {Object} p\n*/\nexport const isPromise = p => p instanceof Promise;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","import diff from 'object-diff';\nimport { fromJS, List, Map } from 'immutable';\nimport { createReducer } from '../utils';\n\nconst API_ERROR = 'API_ERROR';\nconst ENTITY_FIND = 'ENTITY_FIND';\nconst ENTITY_FIND_PENDING = 'ENTITY_FIND_PENDING';\nconst ENTITY_FIND_COMPLETED = 'ENTITY_FIND_COMPLETED';\nexport const findAll = api => (entry, queries, queryText) => {\n    return {\n        type: ENTITY_FIND,\n        meta: {\n            entry,\n            queries,\n            queryText,\n            isLockUI: true\n        },\n        payload: api.findAll(entry, queries)\n    };\n};\n\nconst LOAD_MORE = 'LOAD_MORE';\nconst LOAD_MORE_COMPLETED = 'LOAD_MORE_COMPLETED';\nexport const loadMore = api => (offset, limit) => (dispatch, getState) => {\n    const currentEntity = getState().get('entity').current;\n    const entry = currentEntity.get('entry');\n    const queries = currentEntity.get('queries');\n    return dispatch({\n        type: LOAD_MORE,\n        meta: {\n            entry,\n            queries,\n            offset,\n            limit\n        },\n        payload: api.findAll(entry, { ...queries, p: { offset, limit } })\n    });\n};\n\nconst ENTITY_SORTBY = 'ENTITY_SORTBY';\nconst ENTITY_SORTBY_PENDING='ENTITY_SORTBY_PENDING';\nconst ENTITY_SORTBY_COMPLETED = 'ENTITY_SORTBY_COMPLETED';\nexport const sortBy = api => (field, direction) => (dispatch, getState) => {\n    const currentEntity = getState().get('entity').current;\n    const entry = currentEntity.get('entry');\n    const queries = currentEntity.get('queries');\n\n    queries.sortBy = field && direction ?[field, direction] : undefined;\n\n    return dispatch({\n        type: ENTITY_SORTBY,\n        meta: {\n            field,\n            direction,\n            entry,\n            queries\n        },\n        payload: api.findAll(entry, queries)\n    });\n};\n\nconst ENTITY_GET_ONE = 'ENTITY_GET_ONE';\nconst ENTITY_GET_ONE_COMPLETED = 'ENTITY_GET_ONE_COMPLETED';\nexport const getEntity = api => (entry, id) => {\n    return {\n        type: ENTITY_GET_ONE,\n        meta: {\n            entry,\n            id,\n            isLockUI: true\n        },\n        payload: api.getEntity(entry, id)\n    }\n}\n\nconst SELECT_ENTITY = 'SELECT_ENTITY';\nexport const selectEntity = (ix, id) => {\n    return {\n        type: SELECT_ENTITY,\n        ix,\n        id\n    };\n};\n\nconst ENTITY_CREATE = 'ENTITY_CREATE';\nconst ENTITY_CREATE_COMPLETED = 'ENTITY_CREATE_COMPLETED';\nconst createEntity = api => (entry, data) => {\n    return {\n        type: ENTITY_CREATE,\n        meta: { entry },\n        payload: api.createEntity(entry, data)\n    };\n};\n\nconst ENTITY_UPDATE = 'ENTITY_UPDATE';\nconst ENTITY_UPDATE_COMMIT = 'ENTITY_UPDATE_COMMIT';\nconst updateEntity = api => (entry, data) => (dispatch, getState) => {\n    const old = getState()\n        .get('entity')\n        .current.get('list')\n        .find(i => i.id === data.id);\n    const changes = diff(old, data);\n    const { id, updatedAt } = old;\n    const fields = { ...changes };\n    const conditions = { id, updatedAt };\n\n    return dispatch({\n        type: ENTITY_UPDATE,\n        meta: {\n            isOptimistic: true,\n            entry,\n            fields,\n            conditions\n        },\n        payload: api.updateEntity(entry, fields, conditions)\n    });\n};\n\nexport const saveEntity = api => (entry, data) => (dispatch, getState) => {\n    const updateAction = updateEntity(api);\n    const createAction = createEntity(api);\n    return data.id ? dispatch(updateAction(entry, data)) : dispatch(createAction(entry, data));\n}\n\nconst INITIAL_STATE = fromJS({\n    entry: '',\n    queryTexts: Map({}),\n    queries: {},\n    sortBy: Map({\n        field: null,\n        direction: null\n    }),\n    list: List([]),\n    total: 0,\n    highlightId: null,\n    highlightIx: 0,\n    error: null,\n    isLoading: null,\n    outOfUpateId: null\n});\n\nconst handlers = {\n    [ENTITY_FIND_PENDING](state, action) {\n        return state.withMutations(mst => {\n            mst.set('isLoading', true);\n        });\n    },\n    [ENTITY_FIND_COMPLETED](state, action) {\n        const {\n            payload: { data },\n            meta: { queries, entry, queryText }\n        } = action;\n        return state.withMutations(mst => {\n            mst.set('entry', entry);\n            mst.set('queries', queries);\n            mst.set('list', List(data.rows));\n            mst.set('total', data.total);\n            mst.set('offset', data.offset);\n            mst.set('limit', data.limit);\n            mst.set('isLoading', false);\n            mst.set('outOfUpateId', null);\n            if (queryText) mst.setIn(['queryTexts', entry], queryText);\n        });\n    },\n    [LOAD_MORE_COMPLETED](state, action) {\n        const {\n            payload: { data }\n        } = action;\n        return state.withMutations(mst => {\n            mst.updateIn(['list'], ls => ls.concat(data.rows));\n            mst.set('offset', data.offset);\n            mst.set('limit', data.limit);\n        });\n    },\n    [ENTITY_SORTBY_PENDING](state, action) {\n        const {meta: {field, direction }} = action.origin;\n        return state.withMutations(mst => {\n            mst.setIn(['sortBy','field'], field);\n            mst.setIn(['sortBy','direction'], direction);\n            mst.set('isLoading', true);\n        });\n\n    },\n    [ENTITY_SORTBY_COMPLETED](state, action) {\n        const {\n            payload: { data }\n        } = action;\n        return state.withMutations(mst => {\n            mst.set('list', List(data.rows));\n            mst.set('offset', data.offset);\n            mst.set('limit', data.limit);\n            mst.set('isLoading', false);\n        });\n    },\n    [SELECT_ENTITY](state, { ix, id }) {\n        return state.withMutations(mst => {\n            mst.set('highlightId', id);\n            mst.set('highlightIx', ix);\n        });\n    },\n    [ENTITY_CREATE](state) {\n        return state.withMutations(mst => {\n            mst.set('isLoading', true);\n        });\n    },\n    [ENTITY_CREATE_COMPLETED](state, action) {\n        const {\n            payload: { data }\n        } = action;\n        return state.withMutations(mst => {\n            mst.updateIn(['list'], l => l.insert(0, data));\n            mst.set('highlightId', data.id);\n            mst.set('highlightIx', 0);\n            mst.set('total', mst.get('total') + 1);\n        });\n    },\n    [ENTITY_UPDATE](state, action) {\n        const {\n            meta: { fields, conditions }\n        } = action;\n        return state.withMutations(mst => {\n            mst.updateIn(['list'], l =>\n                l.reduce(\n                    (stack, item) =>\n                        item.id !== conditions.id\n                            ? stack.push(item)\n                            : stack.push({ ...item, ...fields }),\n                    List([])\n                )\n            );\n            mst.set('highlightId', conditions.id);\n            mst.set('isLoading', true);\n        });\n    },\n    [ENTITY_UPDATE_COMMIT](state, action) {\n        const {\n            payload: { data }\n        } = action;\n        return state.withMutations(mst => {\n            mst.updateIn(['list'], l =>\n                l.reduce(\n                    (stack, item) =>\n                        item.id !== data.id\n                            ? stack.push(item)\n                            : stack.push(data),\n                    List([])\n                )\n            );\n        });\n    },\n    [ENTITY_GET_ONE_COMPLETED](state, action) {\n        const {\n            payload: { data }\n        } = action;\n\n        return state.getIn(['list']).size\n            ? state.withMutations(mst => {\n                mst.updateIn(['list'], l =>\n                    l.reduce(\n                        (stack, item) =>\n                            item.id !== data.id\n                                ? stack.push(item)\n                                : stack.push(data),\n                        List([])\n                    )\n                );\n                mst.set('outOfUpateId', null)\n            })\n            : state.withMutations(mst => {\n                mst.setIn(['list'], List([data]));\n                mst.set('outOfUpateId', null);\n            });\n    },\n    [API_ERROR](state, action) {\n        const {\n            origin:{\n                payload: { code },\n                meta: {conditions}\n            }\n        } = action;\n        if(code === 'OUT_OF_DATE'){\n            return state.withMutations(mst => {\n                mst.set('outOfUpateId', conditions.id);\n                mst.set('isLoading', false);\n            });\n        }\n\n        return state.withMutations(mst => {\n            mst.set('isLoading', false);\n        });\n    }\n};\nexport default createReducer(INITIAL_STATE, handlers);\n","export const UI_LOCK = 'UI_LOCK';\nexport const API_ERROR = 'API_ERROR';\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.optimistic = exports.ensureState = exports.REVERT = exports.COMMIT = exports.BEGIN = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _arrayUtils = require('./array-utils');\n\nvar BEGIN = exports.BEGIN = '@@optimist/BEGIN';\nvar COMMIT = exports.COMMIT = '@@optimist/COMMIT';\nvar REVERT = exports.REVERT = '@@optimist/REVERT';\n\nvar isOptimistState = function isOptimistState(state) {\n  return state && Object.keys(state).length === 3 && state.hasOwnProperty('beforeState') && state.hasOwnProperty('history') && state.hasOwnProperty('current');\n};\n\nvar ensureState = exports.ensureState = function ensureState(state) {\n  return isOptimistState(state) ? state.current : state;\n};\n\nvar createState = function createState(state) {\n  return {\n    beforeState: undefined,\n    history: [],\n    current: state\n  };\n};\n\nvar applyCommit = function applyCommit(state, targetActionIndex, reducer) {\n  var history = state.history;\n  // If the action to commit is the first in the queue (most common scenario)\n\n  if (targetActionIndex === 0) {\n    var historyWithoutCommit = history.slice(1);\n    var nextOptimisticIndex = (0, _arrayUtils.findIndex)(historyWithoutCommit, function (action) {\n      return action.meta && action.meta.optimistic && !action.meta.optimistic.isNotOptimistic && action.meta.optimistic.id;\n    });\n    // If this is the only optimistic item in the queue, we're done!\n    if (nextOptimisticIndex === -1) {\n      return _extends({}, state, {\n        history: [],\n        beforeState: undefined\n      });\n    }\n    // Create a new history starting with the next one\n    var newHistory = historyWithoutCommit.slice(nextOptimisticIndex);\n    // And run every action up until that next one to get the new beforeState\n    var newBeforeState = history.reduce(function (mutState, action, index) {\n      return index <= nextOptimisticIndex ? reducer(mutState, action) : mutState;\n    }, state.beforeState);\n\n    return _extends({}, state, {\n      history: newHistory,\n      beforeState: newBeforeState\n    });\n  } else {\n    // If the committed action isn't the first in the queue, find out where it is\n    var actionToCommit = history[targetActionIndex];\n    // Make it a regular non-optimistic action\n    var newAction = Object.assign({}, actionToCommit, {\n      meta: Object.assign({}, actionToCommit.meta, { optimistic: null })\n    });\n    var _newHistory = state.history.slice();\n    _newHistory.splice(targetActionIndex, 1, newAction);\n    return _extends({}, state, {\n      history: _newHistory\n    });\n  }\n};\n\nvar applyRevert = function applyRevert(state, targetActionIndex, reducer) {\n  var beforeState = state.beforeState,\n      history = state.history;\n\n  var newHistory = void 0;\n  // If the action to revert is the first in the queue (most common scenario)\n  if (targetActionIndex === 0) {\n    var historyWithoutRevert = history.slice(1);\n    var nextOptimisticIndex = (0, _arrayUtils.findIndex)(historyWithoutRevert, function (action) {\n      return action.meta && action.meta.optimistic && !action.meta.optimistic.isNotOptimistic && action.meta.optimistic.id;\n    });\n    // If this is the only optimistic action in the queue, we're done!\n    if (nextOptimisticIndex === -1) {\n      return _extends({}, state, {\n        history: [],\n        current: historyWithoutRevert.reduce(function (s, action) {\n          return reducer(s, action);\n        }, beforeState),\n        beforeState: undefined\n      });\n    }\n    newHistory = historyWithoutRevert.slice(nextOptimisticIndex);\n  } else {\n    newHistory = history.slice();\n    newHistory.splice(targetActionIndex, 1);\n  }\n  var newCurrent = newHistory.reduce(function (s, action) {\n    return reducer(s, action);\n  }, beforeState);\n  return _extends({}, state, {\n    history: newHistory,\n    current: newCurrent,\n    beforeState: beforeState\n  });\n};\n\nvar optimistic = exports.optimistic = function optimistic(reducer) {\n  var rawConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var config = Object.assign({\n    maxHistory: 100\n  }, rawConfig);\n\n  return function (state, action) {\n    if (state === undefined || !isOptimistState(state)) {\n      state = createState(reducer(ensureState(state), {}));\n    }\n    var historySize = state.history.length;\n\n    var _ref = action.meta && action.meta.optimistic || {},\n        type = _ref.type,\n        id = _ref.id;\n\n    // a historySize means there is at least 1 outstanding fetch\n\n\n    if (historySize) {\n      if (type !== COMMIT && type !== REVERT) {\n        if (historySize > config.maxHistory) {\n          console.error('@@optimist: Possible memory leak detected.\\n                  Verify all actions result in a commit or revert and\\n                  don\\'t use optimistic-UI for long-running server fetches');\n        }\n        // if it's a BEGIN but we already have a historySize, treat it like a non-opt\n        return _extends({}, state, {\n          history: state.history.concat([action]),\n          current: reducer(state.current, action)\n        });\n      }\n\n      var targetActionIndex = (0, _arrayUtils.findIndex)(state.history, function (action) {\n        return action.meta && action.meta.optimistic && action.meta.optimistic.id === id;\n      });\n      if (targetActionIndex === -1) {\n        throw new Error('@@optimist: Failed to ' + (type === COMMIT ? 'commit' : 'revert') + '. Transaction #' + id + ' does not exist!');\n      }\n\n      // for resolutions, add a flag so that we know it is not an optimistic action\n      action.meta.optimistic.isNotOptimistic = true;\n\n      // include the resolution in the history & current state\n      var nextState = _extends({}, state, {\n        history: state.history.concat([action]),\n        current: reducer(state.current, action)\n      });\n\n      var applyFunc = type === COMMIT ? applyCommit : applyRevert;\n      return applyFunc(nextState, targetActionIndex, reducer);\n    }\n    // create a beforeState since one doesn't already exist\n    if (type === BEGIN) {\n      return _extends({}, state, {\n        history: state.history.concat([action]),\n        current: reducer(state.current, action),\n        beforeState: state.current\n      });\n    }\n\n    // standard action escape\n    return _extends({}, state, {\n      current: reducer(state.current, action)\n    });\n  };\n};","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { optimistic } from 'redux-optimistic-ui';\nimport reducer from './reducer';\nexport default(optimistic(reducer));\n","import { fromJS } from 'immutable';\nimport { createReducer } from './utils';\nimport { UI_LOCK, API_ERROR } from './const';\n\nconst INITIAL_STATE = fromJS({\n    isLock: false,\n    reason: '',\n    details: null,\n    error: null\n});\n\nconst handlers = {\n    [UI_LOCK](state, action) {\n        const { isLock, reason, details } = action;\n        return state.withMutations(mts => {\n            mts.set('isLock', isLock);\n            mts.set('reason', isLock ? reason : null);\n            mts.set('details', isLock ? details : null);\n        });\n    },\n    [API_ERROR](state, action) {\n        return state.withMutations(mutableState => {\n            mutableState.set('error', action.payload);\n        });\n    }\n};\n\nexport default createReducer(INITIAL_STATE, handlers);\n","import {\n    findAll,\n    loadMore,\n    selectEntity,\n    getEntity,\n    saveEntity,\n    sortBy\n} from './reducer';\n\nexport const mapStateToPropsDefault = state => ({ entity: state.get('entity').current });\n\nexport const entityActions = api => ({\n    selectEntity,\n    findAll: findAll(api),\n    loadMore: loadMore(api),\n    sortBy: sortBy(api),\n    getEntity: getEntity(api),\n    saveEntity: saveEntity(api)\n});","import { BEGIN, COMMIT, REVERT } from 'redux-optimistic-ui';\nimport { UI_LOCK } from '../const';\nimport { isPromise } from '../utils';\nlet nextTransactionId = 0;\nexport default store => next => action => {\n    const { type, meta, payload } = action;\n\n    if (payload === undefined || meta === undefined) {\n        return next(action);\n    }\n\n    if (!isPromise(payload)) {\n        next(action);\n    }\n\n    const { isOptimistic, isLockUI } = meta;\n\n    if (isLockUI) {\n        store.dispatch({\n            type: UI_LOCK,\n            isLock: true,\n            origin: action\n        });\n    }\n\n    let transactionId;\n    if (isOptimistic) {\n        transactionId = nextTransactionId++;\n        next(\n            Object.assign({}, action, {\n                type,\n                meta: Object.assign({}, meta, {\n                    optimistic: {\n                        type: BEGIN,\n                        id: transactionId\n                    }\n                })\n            })\n        );\n    } else {\n        next({\n            type: `${type}_PENDING`,\n            origin: action\n        });\n    }\n\n    const resolve = value => {\n        const success = createAction({\n            payload: value,\n            meta,\n            type,\n            isSuccess: true,\n            isOptimistic,\n            transactionId\n        });\n        next(success);\n        return value;\n    };\n\n    const reject = async ressync => {\n        const payload = await ressync;\n        const fail = createAction({\n            payload,\n            meta,\n            type,\n            isSuccess: false,\n            isOptimistic,\n            transactionId\n        });\n        next(fail);\n        const error = { type, meta, payload }\n        throw error;\n    };\n\n    return payload.then(resolve, reject).finally(() => {\n        if (isLockUI) {\n            store.dispatch({\n                type: UI_LOCK,\n                isLock: false,\n                origin: action\n            });\n        }\n    });\n};\n\nfunction createAction({\n    payload,\n    meta,\n    type,\n    isSuccess,\n    isOptimistic,\n    transactionId\n}) {\n    return {\n        type: isOptimistic\n            ? `${type}_${isSuccess ? 'COMMIT' : 'REVERT'}`\n            : `${type}_${isSuccess ? 'COMPLETED' : 'FAILED'}`,\n        payload,\n        meta: isOptimistic\n            ? Object.assign({}, meta, {\n                  optimistic: {\n                      type: isSuccess ? COMMIT : REVERT,\n                      id: transactionId\n                  }\n              })\n            : meta\n    };\n}\n","import { isPromise } from '../utils';\nimport { API_ERROR } from '../const';\nexport default store => next => action => {\n    if (!isPromise(action.payload)) {\n        return next(action);\n    }\n\n    return next(action).catch(origin => {\n        store.dispatch({\n            type: API_ERROR,\n            origin\n        });\n        if (process.env.NODE_ENV === 'development') {\n            console.warn(\n                action.type,\n                'caught at middleware with reason',\n                origin\n            );\n        }\n\n        return origin;\n    });\n};\n","'use strict';\n\nstrict.custom = custom;\n\nmodule.exports = strict;\n\nfunction strict(){\n\treturn diff(null, [].slice.call(arguments, 0));\n}\n\nfunction custom( opts ){\n\treturn diff(opts, [].slice.call(arguments, 1));\n}\n\nfunction diff( opts, subjects ){\n\tvar length = subjects.length;\n\tvar ref = subjects[0];\n\tvar diff = {};\n\tvar equal = opts && opts.equal || isStrictEqual;\n\tvar c;\n\tvar keys;\n\tvar keysLength;\n\tvar key;\n\tvar u;\n\n\tfor (var i = 1;i < length;i++) {\n\t\tc = subjects[i];\n\t\tkeys = Object.keys(c);\n\t\tkeysLength = keys.length;\n\n\t\tfor (u = 0;u < keysLength;u++) {\n\t\t\tkey = keys[u];\n\n\t\t\tif (!equal(c[key], ref[key]))\n\t\t\t\tdiff[key] = c[key];\n\t\t}\n\t}\n\n\treturn diff;\n}\n\nfunction isStrictEqual( a, b ){\n\treturn a === b;\n}\n","import * as utils from './utils';\nimport optimistic  from './middlewares/optimistic';\nimport errorhandler from './middlewares/errorhandler';\nimport entity  from './entity';\nimport ui  from './ui';\nconst middlewares={ optimistic, errorhandler };\nexport {utils, middlewares, entity, ui};\n\nexport * from './entity/connector';\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findIndex = findIndex;\nfunction findIndex(arr, predicate) {\n  var l = arr.length;\n  for (var i = 0; i < l; i++) {\n    if (predicate(arr[i])) {\n      return i;\n    }\n  }\n  return -1;\n}"],"sourceRoot":""}